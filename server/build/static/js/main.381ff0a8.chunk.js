(this["webpackJsonpsheng-ji-new"]=this["webpackJsonpsheng-ji-new"]||[]).push([[0],{39:function(e,t,n){},64:function(e,t){},69:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),s=n.n(r),i=n(33),a=n.n(i),d=n(3),o=n(2),u=(n(39),["spades","hearts","clubs","diamonds"]),l=["-1","0","1","2","3","4","5","6","7","8","9","10","jack","queen","king","ace"],j=["-1","0","1","2","3","4","5","6","7","8","9","10","J","Q","K","A"],h=["/spades.png","/hearts.png","/clubs.png","/diamonds.png"];function b(){for(var e=[],t=1,n=0;n<4;n++)for(var c=2;c<15;c++){var r=0;5===c?r=5:10!==c&&13!==c||(r=10),e.push({name:l[c]+" of "+u[n],suit:u[n],value:c,display:j[c],points:r,index:t,img:h[n],adjustedValue:c,adjSuit:n}),t++}return e.push({name:"small joker",suit:"trump",value:100,display:"JOKER",points:0,index:t,img:"",adjustedValue:100,adjSuit:"trump"}),t++,e.push({name:"big joker",suit:"trump",value:101,display:"JOKER",points:0,index:t,img:"",adjustedValue:101,adjSuit:"trump"}),e}var O=function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.getRef(t)}),[t]),Object(c.jsxs)("label",{style:{left:e.left+"px"},ref:t,children:[Object(c.jsx)("input",{type:"checkbox",name:"card-picked",className:"card-checkbox",value:e.cd.index,checked:e.checked,onChange:e.handleChange}),Object(c.jsxs)("div",{className:"card-container",children:[Object(c.jsx)("p",{className:"card-number"+(e.cd.value<100?"":" joker")+(101===e.cd.value?" red":""),children:e.cd.display}),e.cd.value<100?Object(c.jsx)("img",{className:"card-suit",src:""+e.cd.img}):""]})]})};var p=function(e){var t=Object(r.useState)(e.socket),n=Object(o.a)(t,2),s=n[0],i=(n[1],Object(r.useState)("")),a=Object(o.a)(i,2),d=a[0],u=a[1],l=Object(r.useState)([]),j=Object(o.a)(l,2),h=j[0],b=j[1],O=Object(r.useState)([]),p=Object(o.a)(O,2),m=p[0],f=p[1],x=Object(r.useRef)(null),g=Object(r.useRef)(null);Object(r.useEffect)((function(){s.on("chat message",(function(e){v(e.username,e.body,"")})),s.on("setup game",(function(e){var t=e.teams;t[0].declarers=0===e.declarers,t[1].declarers=1===e.declarers,f(t)})),s.on("user joined",(function(e){v(e.username,e.username+" has joined the game.","connection-msg")})),s.on("user left",(function(e){v(e.username,e.username+" has left the game.","disconnection-msg")}))}),[]);var v=function(e,t,n){var c={body:0===n.length?e+": "+t:t,username:e,style:n};if(b((function(e){return e.concat(c)})),g.current&&x.current){var r=g.current.clientHeight;x.current.scrollTop=r}};return Object(c.jsxs)("aside",{id:"chat",children:[Object(c.jsx)("div",{id:"current-users",children:Object(c.jsx)("div",{id:"all-users",children:m.length>0?m.map((function(e,t){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:(e.declarers?"Declarers":"Opponents")+" \u2013 "+e.score}),Object(c.jsx)("li",{children:e.usernames[0]}),Object(c.jsx)("li",{children:e.usernames[1]})]},t)})):""})}),Object(c.jsxs)("div",{id:"chat-container",children:[Object(c.jsx)("div",{id:"messages-container",ref:x,children:Object(c.jsx)("ul",{id:"messages",ref:g,children:h.length>0?h.map((function(e,t){return Object(c.jsx)("li",{className:"chat-msg "+e.style,children:e.body},t)})):""})}),Object(c.jsxs)("form",{id:"chatbox",action:"",children:[Object(c.jsx)("input",{id:"m",autoComplete:"off",value:d,onChange:function(e){u(e.target.value)}}),Object(c.jsx)("button",{onClick:function(t){var n=d;t.preventDefault(),s.emit("chat message",{body:n,username:e.username}),u("")},children:"Send"})]})]})]})},m=n(6);var f=function(e){var t=Object(r.useRef)(null);Object(r.useEffect)((function(){n()}),[e.left]);var n=function(){var n=e.width;"2"===e.id?m.a.fromTo(t.current,.5,{opacity:0,left:n-30},{opacity:1,left:n/2}):"3"===e.id?m.a.fromTo(t.current,.5,{opacity:0,top:-107},{opacity:1,top:30}):"4"===e.id&&m.a.fromTo(t.current,.5,{opacity:0,left:0},{opacity:1,left:n/2})};return Object(c.jsxs)("div",{className:"card-container"+(e.win?" winning":""),ref:t,style:e.left?{left:e.left+"px"}:{},children:[Object(c.jsx)("p",{className:"card-number"+(e.cd.value<100?"":" joker")+(101===e.cd.value?" red":""),children:e.cd.display}),e.cd.value<100?Object(c.jsx)("img",{className:"card-suit",src:""+e.cd.img}):""]})};var x=function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),s=n[0],i=n[1],a=Object(r.useState)(""),d=Object(o.a)(a,2),u=d[0],l=d[1],j=Object(r.useState)(e.socket),h=Object(o.a)(j,2),b=h[0],O=(h[1],Object(r.useState)(!1)),p=Object(o.a)(O,2),m=p[0],x=p[1],g=Object(r.useRef)(-1),v=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.main<0?g.current=e.id-1:g.current=(e.id-1+e.main)%4,b.on("hand played",(function(e){e.id===g.current&&(i(e.cards),l(e.username))})),b.on("win round",(function(e){e===g.current&&x(!0)})),b.on("new round",(function(){i((function(e){return[]})),x(!1)})),b.on("end game",(function(){i((function(e){return[]})),x(!1),l("")}))}),[]),Object(c.jsxs)("div",{className:"player-"+e.id,ref:v,children:[Object(c.jsx)("h2",{children:u}),Object(c.jsx)("div",{id:"player-"+e.id+"-cards",children:s.map((function(t,n){return Object(c.jsx)(f,{cd:t,win:m,id:e.id,width:v?v.current.clientWidth:150},t.index)}))})]})},g=n(7);function v(e,t){switch(t.type){case"add":return[].concat(Object(g.a)(e),[t.item]);case"remove":return[].concat(Object(g.a)(e.slice(0,t.index)),Object(g.a)(e.slice(t.index+1)));case"replace":return t.items;case"update":return[].concat(Object(g.a)(e.slice(0,t.index)),[t.item],Object(g.a)(e.slice(t.index+1)));case"filter":return e.filter((function(e,n){return!t.indices.includes(n)}));case"clear":return[]}}var y=function(e){var t=Object(r.useState)(e.socket),n=Object(o.a)(t,2),s=n[0],i=(n[1],function(e,t){var n=Object(r.useReducer)(e,t),c=Object(o.a)(n,2),s=c[0],i=c[1],a=Object(r.useRef)(null);Object(r.useEffect)((function(){a.current&&(a.current(s),a.current=null)}),[a.current,s]);var d=Object(r.useCallback)((function(e){return i(e),new Promise((function(e){a.current=e}))}),[i]);return[s,d]}(v,[])),a=Object(o.a)(i,2),u=a[0],l=a[1],j=Object(r.useState)([]),h=Object(o.a)(j,2),b=h[0],p=h[1],x=Object(r.useReducer)(v,[]),g=Object(o.a)(x,2),y=g[0],k=g[1],S=Object(r.useState)(!1),w=Object(o.a)(S,2),N=w[0],C=w[1],T=Object(r.useState)(!1),R=Object(o.a)(T,2),I=R[0],E=R[1],P=Object(r.useState)(!1),D=Object(o.a)(P,2),J=D[0],W=D[1],M=Object(r.useRef)({currentSuit:"",switching:!1,playerId:-1,turn:!1,plays:0}),A=Object(r.useRef)(null),G=Object(r.useRef)(null),U=Object(r.useRef)(null);Object(r.useEffect)((function(){s.on("my hand",(function(e){M.current=Object(d.a)(Object(d.a)({},M.current),{},{playerId:e.playerId});var t=[],n=V(0);e.hand.forEach((function(e,c){t.push({obj:e,dom:{},position:n[c],checked:!1})})),l({type:"replace",items:t}),e.prevPlayed&&e.prevPlayed.forEach((function(e){k({type:"add",item:{obj:e,left:U.current.clientWidth/2}})}))})),s.on("swap cards",(function(t){M.current=Object(d.a)(Object(d.a)({},M.current),{},{switching:!0,turn:!0,playerId:t}),e.sendMessage({body:"Select 6 cards to discard.",color:"green"})})),s.on("next turn",(function(e){e.turn===M.current.playerId&&(M.current=Object(d.a)(Object(d.a)({},M.current),{},{turn:!0,currentSuit:e.suit,plays:e.plays}))})),s.on("win round",(function(e){e===M.current.playerId&&W(!0)})),s.on("new round",(function(e){e!==M.current.playerId&&(p((function(e){return[]})),W(!1))})),s.on("end game",(function(){k({type:"clear"}),p([]),l({type:"clear"})}))}),[]),Object(r.useEffect)((function(){u.length>0&&K()}),[u.join(",")]);var V=function(e){var t=[],n=0;if(0===e){var c=u.length,r=A.current?A.current.clientWidth:681,s=(r-80)/(c-1),i=Math.min(s,80);r>80*c&&(n=(r-80*c)/2);for(var a=0;a<c;a++)t.push(n+i*a)}else{var d=y.length,o=U.current?U.current.clientWidth:60,l=(o-60)/(d-1),j=Math.min(l,70);o>70*d&&(n=(o-70*d)/2);for(var h=0;h<d;h++)t.push(n+j*h+35)}return t},H=function(e){var t=u[e];t.checked=!1,l({type:"update",index:e,item:t});var n=A.current.clientWidth/2-31-u[e].position,c=-1*(G.current.clientHeight+13),r=u[e].obj;return m.a.to(t.dom.current,1,{x:n,y:c,width:"60px",height:"80px",borderRadius:"5px"}),r},K=function(){var e=V(0);(function(e,t){for(var n=0;n<t.length;n++)if(e[n]!==t.position)return!1;return!0})(e,u)||u.forEach((function(t,n){var c=t;c.position=e[n],l({type:"update",index:n,item:c})}))};return Object(c.jsxs)("div",{style:{width:"100%",display:"flex",flexWrap:"wrap"},children:[Object(c.jsx)("div",{className:"play",ref:G,children:Object(c.jsxs)("div",{className:"play-hand",children:[Object(c.jsx)("p",{id:"history-message",style:I?{opacity:1}:{opacity:0},children:"Click to see play history"}),Object(c.jsx)("div",{className:"play-hand-cards",onClick:function(e){N?(y.forEach((function(e,t){var n=e;n.left=U.current.clientWidth/2,k({type:"update",index:t,item:n})})),setTimeout((function(){C(!1)}),300)):(C(!0),E(!1),setTimeout((function(){var e=V(1);y.forEach((function(t,n){var c=t;c.left=e[n],k({type:"update",index:n,item:c})}))}),10))},ref:U,onMouseEnter:function(e){N||E(!0)},onMouseLeave:function(e){E(!1)},children:N?y.map((function(e,t){return Object(c.jsx)(f,{cd:e.obj,win:!1,id:1,left:e.left},e.obj.index+100)})):b.map((function(e){return Object(c.jsx)(f,{cd:e,win:J,id:1,left:U.current.clientWidth/2},e.index)}))})]})}),Object(c.jsx)("div",{className:"my-player",children:Object(c.jsx)("div",{className:"hand",children:Object(c.jsxs)("form",{id:"hand-form",action:"",children:[Object(c.jsx)("div",{className:"hand-cards",ref:A,children:Object(c.jsx)("div",{children:u.map((function(e,t){return Object(c.jsx)(O,{cd:e.obj,checked:e.checked,left:e.position,getRef:function(e){return function(e,t,n){if("active"===n){var c=u[t];c.dom=e,l({type:"update",index:t,item:c})}else{var r=y[t];r.dom=e,k({type:"update",index:t,item:r})}}(e,t,"active")},handleChange:function(){return function(e){var t=u[e];t.checked=!t.checked,l({type:"update",index:e,item:t})}(t)}},e.obj.index)}))})}),Object(c.jsx)("button",{id:"hand-submit",disabled:!M.current.turn,onClick:function(t){t.preventDefault();var n=u.filter((function(e){return e.checked}));if(n=n.map((function(e){return e.obj})),M.current.switching)if(n.length>6)e.sendMessage({body:"You can only pick 6 cards!",color:"red"});else if(n.length<6)e.sendMessage({body:"You didn't select 6 cards!",color:"red"});else{e.sendMessage({body:"",color:""});var c=[];n.forEach((function(e){var t=u.findIndex((function(t){return t.obj.index===e.index}));H(t),c.push(t)})),setTimeout((function(){l({type:"filter",indices:c})}),1e3),s.emit("submit swap cards",{cards:n.map((function(e){return e.index})),id:M.current.playerId}),M.current=Object(d.a)(Object(d.a)({},M.current),{},{switching:!1})}else if(M.current.turn)if(n.length>1)e.sendMessage({body:"You can only play one card!",color:"red"});else if(n.length<1)e.sendMessage({body:"You didn't select a card!",color:"red"});else{if(n[0].adjSuit===M.current.currentSuit||u.findIndex((function(e){return e.obj.adjSuit===M.current.currentSuit}))<0){p((function(e){return[]})),W(!1);var r=u.findIndex((function(e){return e.obj.index===n[0].index})),i=H(r);setTimeout((function(){l({type:"remove",index:r}),p((function(e){return e.concat(i)})),k({type:"add",item:{obj:i,left:U.current.clientWidth/2}}),M.current=Object(d.a)(Object(d.a)({},M.current),{},{turn:!1}),s.emit("submit hand",{cards:n.map((function(e){return e.index})),id:M.current.playerId})}),1e3)}else e.sendMessage({body:"You can't play that card!",subtitle:"You need to play "+M.current.currentSuit+".",color:"red"})}},children:"Confirm Play"})]})})})]})},k=n(20);var S=function(e){var t=Object(r.useState)(e.socket),n=Object(o.a)(t,2),s=n[0],i=(n[1],Object(r.useState)([])),a=Object(o.a)(i,2),d=a[0],u=a[1],l=Object(r.useState)(0),j=Object(o.a)(l,2),h=j[0],b=j[1],O=Object(r.useState)(!1),p=Object(o.a)(O,2),m=p[0],x=p[1];return Object(r.useEffect)((function(){s.on("reveal discard",(function(e){u(e.discard),b(e.addPoints),x(e.adding)}))})),Object(c.jsxs)("div",{id:"discard",style:e.visible?{display:"block"}:{display:"none"},children:[Object(c.jsx)("h2",{children:"Discard Pile"}),Object(c.jsx)("div",{id:"discard-cards",children:d.map((function(e){return Object(c.jsx)(f,{cd:e,win:!!m&&e.points>0},e.index)}))}),Object(c.jsx)("p",{id:"discard-points",children:m?"The opponents gained "+h+" points.":""})]})};var w=function(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),s=n[0],i=n[1],a=Object(r.useState)(e.socket),d=Object(o.a)(a,2),u=d[0],l=(d[1],Object(r.useState)({body:"",subtitle:"",color:""})),j=Object(o.a)(l,2),h=j[0],b=j[1],O=Object(r.useState)(!1),p=Object(o.a)(O,2),m=p[0],f=p[1],g=Object(r.useRef)(null);return Object(r.useEffect)((function(){u.on("set playerId",(function(e){g.current=e})),u.on("my hand",(function(e){i(!0)})),u.on("next turn",(function(e){e.turn===g.current?b({body:"It's your turn!",color:"green"}):b({body:"It's "+e.usrnm+"'s turn!",color:""})})),u.on("reveal discard",(function(){f(!0),setTimeout((function(){f(!1)}),7e3)})),u.on("end game",(function(e){b({body:e.msg,subtitle:e.subtitle,color:""}),i(!1)}))}),[]),Object(c.jsxs)("div",{className:"game-space",children:[e.popUp?Object(c.jsxs)("div",{id:"pop-up",children:[Object(c.jsx)("p",{id:"pop-up-close",children:Object(c.jsx)("a",{href:"#",onClick:e.togglePop,children:"X"})}),Object(c.jsxs)("div",{id:"pop-up-inner",children:[Object(c.jsx)("h1",{children:"Game History"}),Object(c.jsx)("h3",{className:"yellow",children:"The team that was the Declarer each round is in yellow."}),Object(c.jsx)("br",{}),e.history.length>0?Object(c.jsxs)("table",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Round"}),Object(c.jsx)("th",{children:e.history[0].teams[0].usernames[0]+" & "+e.history[0].teams[0].usernames[1]}),Object(c.jsx)("th",{children:e.history[0].teams[1].usernames[0]+" & "+e.history[0].teams[1].usernames[1]}),Object(c.jsx)("th",{children:"Starter"}),Object(c.jsx)("th",{children:"Trump Suit"}),Object(c.jsx)("th",{children:"Points"}),Object(c.jsx)("th",{children:"Winner"})]}),e.history.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.roundIndex}),Object(c.jsx)("td",{className:0===e.declarer?"winner":"",children:e.teams[0].score}),Object(c.jsx)("td",{className:1===e.declarer?"winner":"",children:e.teams[1].score}),Object(c.jsx)("td",{children:e.starter}),Object(c.jsx)("td",{children:e.trumpSuit}),Object(c.jsx)("td",{children:e.points}),Object(c.jsx)("td",{children:e.teams[e.winner].usernames[0]+" & "+e.teams[e.winner].usernames[1]})]})}))]}):Object(c.jsx)("p",{children:"No games yet."})]})]}):"",Object(c.jsx)(S,{socket:u,visible:m}),Object(c.jsx)("div",{id:"overlay"}),Object(c.jsxs)("div",{id:"header",children:[Object(c.jsx)("p",{className:"center-msg "+h.color,children:h.body}),Object(c.jsx)("h4",{className:h.color,children:h.subtitle})]}),null!==g.current?Object(c.jsx)(x,{id:"3",socket:u,main:g.current}):"",null!==g.current?Object(c.jsx)(x,{id:"4",socket:u,main:g.current}):"",Object(c.jsxs)("div",{className:"center",children:[Object(c.jsx)("input",{type:"text",value:e.code.current,id:"code-box",disabled:!0}),s||"player"!==e.userType.current?"":Object(c.jsx)("button",{id:"start-game",onClick:function(e){e.preventDefault(),b({body:"Waiting...",color:""}),i(!0),u.emit("start game",{})},children:null!==g.current?"Start Next Round":"Start Game"})]}),null!==g.current?Object(c.jsx)(x,{id:"2",socket:u,main:g.current}):"","player"===e.userType.current?Object(c.jsx)(y,{socket:u,playerId:g.current,sendMessage:b}):Object(c.jsx)(x,{id:"1",socket:u,main:g.current})]})};function N(e){var t=Object(r.useState)(e.socket),n=Object(o.a)(t,2),s=n[0],i=(n[1],Object(r.useState)("")),a=Object(o.a)(i,2),u=a[0],l=a[1],j=Object(r.useState)({rank:2,suit:null}),h=Object(o.a)(j,2),b=h[0],O=h[1];return Object(c.jsx)("div",{className:"start-page",children:Object(c.jsxs)("div",{className:"game-start",children:[Object(c.jsx)("h1",{children:"Sheng Ji"}),Object(c.jsxs)("div",{className:"create-game",children:[Object(c.jsxs)("form",{id:"edit-settings",children:[Object(c.jsx)("label",{children:"Trump Rank"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{id:"setTrumpValue",name:"setTrumpValue",autoComplete:"off",defaultValue:"2",min:"2",max:"14",type:"number",onChange:function(e){O(Object(d.a)(Object(d.a)({},b),{},{rank:e.target.value}))}}),Object(c.jsx)("br",{}),Object(c.jsx)("label",{children:"Trump Suit"}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"select",children:Object(c.jsxs)("select",{id:"setTrumpSuit",name:"setTrumpSuit",onChange:function(e){O(Object(d.a)(Object(d.a)({},b),{},{suit:e.target.value}))},children:[Object(c.jsx)("option",{value:"spades",children:"spades"}),Object(c.jsx)("option",{value:"hearts",children:"hearts"}),Object(c.jsx)("option",{value:"clubs",children:"clubs"}),Object(c.jsx)("option",{value:"diamonds",children:"diamonds"}),Object(c.jsx)("option",{value:"random",defaultValue:!0,children:"random"})]})}),Object(c.jsx)("button",{onClick:function(t){t.preventDefault(),b.rank>=2&&b.rank<=14?s.emit("create game",b,(function(t){e.code.current=t,e.setRoom(0)})):l("The trump rank must be between 2 and 14.")},children:"Create Game"})]}),Object(c.jsx)("p",{id:"login-error",className:"error-message",children:u}),Object(c.jsx)("p",{children:Object(c.jsx)("a",{href:"#",onClick:e.setState,children:"\u2190 BACK"})})]})]})})}function C(e){var t=Object(r.useState)(e.socket),n=Object(o.a)(t,2),s=n[0],i=(n[1],Object(r.useState)("")),a=Object(o.a)(i,2),d=a[0],u=a[1],l=Object(r.useState)(""),j=Object(o.a)(l,2),h=j[0],b=j[1];return Object(c.jsx)("div",{className:"start-page",children:Object(c.jsxs)("div",{className:"game-start",children:[Object(c.jsx)("h1",{children:"Sheng Ji"}),Object(c.jsxs)("div",{className:"create-game",children:[Object(c.jsxs)("form",{id:"edit-settings",children:[Object(c.jsx)("label",{children:"Game ID"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"gameID",autoComplete:"off",type:"text",onChange:function(e){b(e.target.value)}}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{onClick:function(t){t.preventDefault(),s.emit("join game",h,(function(t){"success"===t?(e.code.current=h,e.setRoom(0)):u("No game with that code found.")}))},children:"Join Game"}),Object(c.jsx)("p",{id:"login-error",className:"error-message",children:d})]}),Object(c.jsx)("p",{children:Object(c.jsx)("a",{href:"#",onClick:e.setState,children:"\u2190 BACK"})})]})]})})}function T(e){return Object(c.jsxs)("div",{id:"instructions",children:[Object(c.jsx)("p",{id:"instructions-close",onClick:function(){e.setState(0)},children:Object(c.jsx)("a",{href:"#",children:"X"})}),Object(c.jsx)("h1",{children:"Rules"}),Object(c.jsx)("h3",{children:"Players and Cards"}),Object(c.jsx)("p",{children:"Sheng Ji is a game played by four players in fixed teams, with partners facing each other across the table. A standard international pack is used, with red and black jokers, making 54 cards in all. The point values of the cards are as follows:"}),Object(c.jsxs)("table",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"Each King"}),Object(c.jsx)("td",{children:"10 points"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"Each ten"}),Object(c.jsx)("td",{children:"10 points"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"Each five "}),Object(c.jsx)("td",{children:"5 points,"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"Other cards"}),Object(c.jsx)("td",{children:"no value"})]})]}),Object(c.jsx)("h3",{children:"Ranking of Cards"}),Object(c.jsx)("p",{children:"In each hand there are eighteen trumps: the two jokers, all the cards of a particular suit (the trump suit) and all the cards of a particular rank (the trump rank). The highest trump is the red Joker, second is the black Joker, and third is the card which belongs to both the trump suit and the trump rank. Next come the other three cards of the trump rank, which are equal in status. Finally there are the remaining cards of the trump suit which rank in downwards order A, K, Q, J, 10, 9, 8, 7, 6, 5, 4, 3, 2 (omitting the trump rank). The three remaining suits also rank from highest to lowest omitting the trump rank."}),Object(c.jsx)("h3",{children:"Declarers and Opponents"}),Object(c.jsx)("p",{children:"In each game one team is the Declarers, and the other are the Opponents. The Declarers are the winners of the previous game. Each team's score is expressed as a card rank from two (low) up to Ace (high). In each game the trump rank is the Declarers' current score. Both sides start at two and the winners are the first side whose score goes above Ace."}),Object(c.jsx)("p",{children:"In each game, one of the Declarers is designated the starter. They will get to start the first round of the game. Additionally, before the game starts, the starter gets the 6 leftover cards after the cards have been dealed. They then get to choose 6 cards from their own hand to discard. No other players get to see these cards. These cards will become important after the game is finished."}),Object(c.jsx)("h3",{children:"The Play"}),Object(c.jsx)("p",{children:"During the play, Jokers and cards of the trump rank all count as belonging to the trump suit, not to the suits marked on them. "}),Object(c.jsx)("p",{children:"Play is in counter-clockwise rotation. In the first round, the first person to play their cards is the starter; in each subsequent round, the first person to play is the winner of the previous round. Each of the other three players in turn must play a card in the same suit as the person who started, unless they have run out of cards of the suit, then they may play any cards in their hand. If playing the trump suit, among trumps of equal rank, the one which is played earliest beats the others. When playing different suits, the trump suit will beat the other suits. If everyone plays different non-trump suits, then the highest card in the suit the first person played wins."}),Object(c.jsx)("p",{children:"The goal of the game is to win rounds containing points, that is kings, tens and fives. Whenever the Opponents win a round containing any point cards, they accumulate the amount of points in the cards. When the Declarers win a round, they do not accumulate points but prevent the Opponents from winning points."}),Object(c.jsx)("h3",{children:"Scoring"}),Object(c.jsx)("p",{children:"The result of the game depends on the number of card points won by the Opponents. This determines which side scores how many points, and who will be the Declarers for the next hand."}),Object(c.jsx)("p",{children:"If the Opponents win the last round of the game, any point cards in the discard pile get added to the Opponents' points. Moreover, the value of each point card in the discard pile is doubled."}),Object(c.jsxs)("table",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Points"}),Object(c.jsx)("th",{children:"Score"}),Object(c.jsx)("th",{children:"Declarers for next hand"}),Object(c.jsx)("th",{children:"Starter for next hand"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"0"}),Object(c.jsx)("td",{children:"Declarers score 2"}),Object(c.jsx)("td",{children:"No change"}),Object(c.jsx)("td",{children:"Previous starter's partner"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"5 to 35"}),Object(c.jsx)("td",{children:"Declarers score 1"}),Object(c.jsx)("td",{children:"No change"}),Object(c.jsx)("td",{children:"Previous starter's partner"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"40 to 75"}),Object(c.jsx)("td",{children:"Opponents score 1"}),Object(c.jsx)("td",{children:"Opponents become new declarers"}),Object(c.jsx)("td",{children:"Player to previous starter's right"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"80 to 95"}),Object(c.jsx)("td",{children:"Opponents score 2"}),Object(c.jsx)("td",{children:"Opponents become new declarers"}),Object(c.jsx)("td",{children:"Player to previous starter's right"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"100 or more"}),Object(c.jsx)("td",{children:"Opponents score 3"}),Object(c.jsx)("td",{children:"Opponents become new declarers"}),Object(c.jsx)("td",{children:"Player to previous starter's right"})]})]})]})}var R=function(e){var t=Object(r.useState)(0),n=Object(o.a)(t,2),s=n[0],i=n[1],a=Object(r.useState)(e.socket),d=Object(o.a)(a,2),u=d[0];return d[1],1===s?Object(c.jsx)(N,{setState:function(){return i(0)},socket:u,setRoom:e.setRoom,code:e.code}):2===s?Object(c.jsx)(C,{setState:function(){return i(0)},socket:u,setRoom:e.setRoom,code:e.code}):3===s?Object(c.jsx)(T,{setState:i}):Object(c.jsx)("div",{className:"start-page",children:Object(c.jsxs)("div",{className:"game-start",children:[Object(c.jsx)("h1",{children:"Sheng Ji"}),Object(c.jsxs)("div",{className:"create-game",children:[Object(c.jsx)("h2",{children:"Host"}),Object(c.jsx)("button",{onClick:function(){return i(1)},children:"Create a Game"})]}),Object(c.jsxs)("div",{className:"join-game",children:[Object(c.jsx)("h2",{children:"Guest"}),Object(c.jsx)("button",{onClick:function(){return i(2)},children:"Join a Game"})]}),Object(c.jsx)("button",{id:"instructions-btn",onClick:function(){i(3)},children:"How to Play"})]})})};var I=function(e){var t=Object(r.useState)(e.socket),n=Object(o.a)(t,2),s=n[0],i=(n[1],Object(r.useState)("")),a=Object(o.a)(i,2),d=a[0],u=a[1],l=Object(r.useState)(-1),j=Object(o.a)(l,2),h=j[0],b=j[1],O=Object(r.useState)(""),p=Object(o.a)(O,2),m=p[0],f=p[1],x=Object(r.useState)([{usernames:[]},{usernames:[]}]),g=Object(o.a)(x,2),v=g[0],y=g[1];Object(r.useEffect)((function(){s.on("set teams",(function(e){y((function(t){return e}))}))}),[]);var k=function(t){s.emit("user type",t,(function(t){"player"===t?(b(2),e.setUserType(0),u("")):"spectator"===t?(e.setUserType(1),e.finished(m)):u(t)}))},S=function(t){s.emit("set team",t,(function(t){"success"===t?e.finished(m):u(t)}))};return-1===h?Object(c.jsx)(R,{socket:s,setRoom:b,code:e.code}):0===h?Object(c.jsx)("div",{className:"start-page",children:Object(c.jsxs)("div",{id:"registration",children:[Object(c.jsx)("h1",{children:"Sheng Ji"}),Object(c.jsx)("h3",{id:"start-code",children:e.code.current}),Object(c.jsxs)("form",{id:"create-user",children:[Object(c.jsx)("label",{children:"Username"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{id:"username",name:"username",autoComplete:"off",type:"text",value:m,onChange:function(e){f(e.target.value)}}),Object(c.jsx)("button",{onClick:function(t){t.preventDefault(),""!==m&&m.replace(/\s/g,"").length?s.emit("add user",m,(function(t){"success"===t?(e.setUsername(m),b(1),u("")):"return"===t?(e.setUserType(0),e.finished(m)):u(t)})):u("Please enter a valid username.")},children:"Submit"})]}),Object(c.jsx)("p",{id:"login-error",className:"error-message",children:d})]})}):1===h?Object(c.jsx)("div",{className:"start-page",children:Object(c.jsx)("div",{id:"game-settings",children:Object(c.jsxs)("div",{id:"game-settings-player",children:[Object(c.jsx)("h1",{children:"Sheng Ji"}),Object(c.jsx)("h3",{id:"start-code",children:e.code.current}),Object(c.jsx)("h2",{children:"Would you like to join the game as a player or a spectator?"}),Object(c.jsx)("button",{id:"join-player",onClick:function(){return k("player")},children:"Player"}),Object(c.jsx)("button",{id:"join-spectator",onClick:function(){return k("spectator")},children:"Spectator"}),Object(c.jsx)("p",{id:"setting-error",className:"error-message",children:d})]})})}):2===h?Object(c.jsx)("div",{className:"start-page",children:Object(c.jsx)("div",{id:"game-settings",children:Object(c.jsxs)("div",{id:"team",children:[Object(c.jsx)("h1",{children:"Sheng Ji"}),Object(c.jsx)("h3",{id:"start-code",children:e.code.current}),Object(c.jsx)("h2",{id:"team-header",children:"Which team would you like to join?"}),Object(c.jsxs)("div",{id:"team-container",children:[Object(c.jsxs)("div",{id:"declarers",onClick:function(){return S(0)},children:[Object(c.jsx)("h3",{children:"Declarers"}),Object(c.jsx)("div",{children:Object(c.jsx)("ul",{children:v[0].usernames.length>0?v[0].usernames.map((function(e){return Object(c.jsx)("li",{children:e})})):Object(c.jsx)("li",{children:"No players yet"})})})]}),Object(c.jsxs)("div",{id:"opponents",onClick:function(){return S(1)},children:[Object(c.jsx)("h3",{children:"Opponents"}),Object(c.jsx)("div",{children:Object(c.jsx)("ul",{children:v[1].usernames.length>0?v[1].usernames.map((function(e){return Object(c.jsx)("li",{children:e})})):Object(c.jsx)("li",{children:"No players yet"})})})]})]}),Object(c.jsx)("p",{id:"team-error",className:"error-message",children:d})]})})}):void 0},E=n.n(k)()("http://localhost:8888/");var P=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],s=t[1],i=Object(r.useState)(!1),a=Object(o.a)(i,2),u=a[0],l=a[1],j=Object(r.useState)([]),h=Object(o.a)(j,2),O=h[0],m=h[1],f=Object(r.useState)({username:"",loggedIn:!1}),x=Object(o.a)(f,2),g=x[0],v=x[1],y=Object(r.useState)({trumpSuit:"",trumpRank:null,points:0}),k=Object(o.a)(y,2),S=k[0],N=k[1],C=Object(r.useRef)(""),T=Object(r.useRef)("");return Object(r.useEffect)((function(){s(b()),E.on("setup game",(function(e){N({trumpSuit:e.trumpSuit,trumpRank:e.trumpValue,points:e.points})})),E.on("update points",(function(e){N((function(t){return Object(d.a)(Object(d.a)({},t),{},{points:e})}))})),E.on("disconnected",(function(){alert("You have disconnected from the server. Please refresh your page.")}))}),[s]),Object(c.jsxs)("div",{className:"App",children:[g.loggedIn?"":Object(c.jsx)(I,{username:g.username,socket:E,setUsername:function(e){v({username:e,loggedIn:g.loggedIn})},setUserType:function(e){C.current=0===e?"player":"spectator"},finished:function(e){v({username:e,loggedIn:!0})},code:T}),Object(c.jsxs)("div",{id:"chat-page",children:[Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsxs)("div",{className:"legend",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Trump Suit"}),Object(c.jsxs)("p",{id:"trump-suit",children:[S.trumpSuit?Object(c.jsx)("img",{src:"/"+S.trumpSuit+".png"}):""," "]})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Trump Rank"}),Object(c.jsx)("p",{id:"trump-rank",children:S.trumpRank?S.trumpRank:""})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Points"}),Object(c.jsx)("p",{id:"points",children:S.points})]}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("h2",{children:["Game",Object(c.jsx)("br",{}),"History"]}),Object(c.jsx)("p",{children:Object(c.jsx)("a",{id:"game-history",href:"#",onClick:function(e){E.emit("get game history",{},(function(e){m(e)})),l(!0)},children:"View"})})]})]}),Object(c.jsxs)("div",{id:"my-player-stats",children:[Object(c.jsx)("h3",{id:"my-username",children:g.username}),Object(c.jsx)("p",{children:Object(c.jsx)("a",{href:"#",id:"help-link",style:{fontSize:"10px"},children:"Help"})})]})]}),n.length>0?Object(c.jsx)(w,{deck:n,socket:E,popUp:u,togglePop:function(){l(!1)},history:O,userType:C,code:T}):"",Object(c.jsx)(p,{socket:E,username:g.username})]})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),s(e),i(e)}))};a.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(P,{})}),document.getElementById("root")),D()}},[[69,1,2]]]);
//# sourceMappingURL=main.381ff0a8.chunk.js.map